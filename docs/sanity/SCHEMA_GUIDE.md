# 📜 Sanity Schema Guide\n\nThis document provides a comprehensive guide to the content schemas defined in the **sanity** workspace. Understanding these schemas is crucial for content modeling, data querying, and frontend integration.\n\n## 🎯 Schema Philosophy\n\nOur Sanity schemas are designed with the following principles in mind:\n\n1.  **Structured Content**: Define clear, well-structured data models for all content types.\n2.  **Content Reusability**: Create modular and reusable schema types (e.g., for addresses, image galleries).\n3.  **Editor Experience**: Optimize for an intuitive and efficient content editing experience in Sanity Studio.\n4.  **Query Performance**: Design schemas that allow for efficient data fetching by the frontend.\n5.  **Scalability**: Ensure schemas can evolve as the project grows.\n\n## 📂 Schema Files Location\n\nAll schema definitions are located in the `sanity/schemas/` directory.\nEach primary document type typically has its own file (e.g., `listing.ts`, `city.ts`). Reusable object types might also be in separate files or grouped logically.\n\n```\nsanity/\n└── schemas/\n    ├── documents/              # Main document types\n    │   ├── listing.ts\n    │   ├── city.ts\n    │   ├── blogPost.ts\n    │   ├── author.ts\n    │   └── siteConfig.ts\n    ├── objects/                # Reusable object types\n    │   ├── address.ts\n    │   ├── geoPoint.ts\n    │   ├── imageGallery.ts\n    │   ├── richText.ts         # (Block content)\n    │   └── seo.ts\n    └── index.ts                # Exports all schema types\n```\n\n(Note: The `documents/` and `objects/` sub-folder structure is a common convention and might be adopted or already in place. If not, schemas are directly under `sanity/schemas/`.)\n\n## 📄 Main Document Types\n\nThese are the top-level content types that can be created and managed in Sanity Studio.\n\n### 1. Listing (`listing.ts`)\n\nRepresents a venue, co-working space, eco-lodge, or other sustainable service/location.\n\n**Key Fields**:\n\n*   `title` (string, required): Name of the listing.\n*   `slug` (slug, required, unique): URL-friendly identifier, auto-generated from title.\n*   `listingType` (string, required, list): Type of listing (e.g., \"Coworking Space\", \"Eco Hotel\", \"Vegan Cafe\").\n*   `description` (richText): Detailed description of the listing.\n*   `shortDescription` (text): A brief summary for cards or previews.\n*   `mainImage` (image, required): Primary image for the listing.\n*   `imageGallery` (imageGallery): A collection of additional images.\n*   `address` (address, required): Physical address of the listing.\n*   `location` (geopoint): Latitude and longitude for map integration.\n*   `city` (reference, required, to: `city`): The city where the listing is located.\n*   `country` (string, required): Country (could be derived from city or explicit).\n*   `website` (url): Official website.\n*   `contactEmail` (string): Contact email address.\n*   `phoneNumber` (string): Contact phone number.\n*   `openingHours` (string or custom object): Opening hours information.\n*   `amenities` (array of strings, list): List of amenities (e.g., \"WiFi\", \"Coffee\", \"Meeting Rooms\").\n*   `sustainabilityFeatures` (array of objects):\n    *   `feature` (string): Description of the feature (e.g., \"Uses renewable energy\").\n    *   `rating` (number): Optional rating or impact level.\n*   `priceRange` (string, list): e.g., \"$\", \"$$\", \"$$$\".\n*   `rating` (number): Average user rating (potentially aggregated).\n*   `isFeatured` (boolean): Highlight this listing.\n*   `status` (string, list, default: \"draft\"): e.g., \"draft\", \"published\", \"archived\".\n*   `seo` (seo): SEO metadata (title, description, keywords).\n\n### 2. City (`city.ts`)\n\nRepresents a city where listings are located.\n\n**Key Fields**:\n\n*   `name` (string, required): Name of the city.\n*   `slug` (slug, required, unique): URL-friendly identifier.\n*   `country` (string, required): Country the city belongs to.\n*   `description` (richText): Overview of the city for digital nomads/eco-travelers.\n*   `mainImage` (image): Featured image for the city.\n*   `location` (geopoint): Central coordinates of the city.\n*   `continent` (string, list): Continent.\n*   `popularAttractions` (array of strings): List of key attractions.\n*   `costOfLiving` (string, list): e.g., \"Low\", \"Medium\", \"High\".\n*   `digitalNomadFriendliness` (number, 1-5): Rating for nomad suitability.\n*   `ecoFriendliness` (number, 1-5): Rating for sustainability aspects.\n*   `isFeatured` (boolean): Highlight this city.\n*   `seo` (seo): SEO metadata.\n\n### 3. Blog Post (`blogPost.ts`)\n\nRepresents an article or blog post.\n\n**Key Fields**:\n\n*   `title` (string, required): Title of the blog post.\n*   `slug` (slug, required, unique): URL-friendly identifier.\n*   `author` (reference, required, to: `author`): Author of the post.\n*   `publishedAt` (datetime, required): Publication date.\n*   `mainImage` (image): Main image for the post.\n*   `excerpt` (text): Short summary of the post.\n*   `body` (richText): Main content of the blog post.\n*   `categories` (array of references, to: `category` - *if categories are a separate document type*):\n    *   Or `tags` (array of strings): Simpler tagging system.\n*   `seo` (seo): SEO metadata.\n*   `status` (string, list, default: \"draft\"): e.g., \"draft\", \"published\".\n\n### 4. Author (`author.ts`)\n\nRepresents a content author (for blog posts, etc.).\n\n**Key Fields**:\n\n*   `name` (string, required): Author\'s name.\n*   `slug` (slug, required, unique): URL-friendly identifier.\n*   `image` (image): Author\'s profile picture.\n*   `bio` (text): Short biography.\n*   `website` (url): Optional personal website/social media link.\n\n### 5. Site Configuration (`siteConfig.ts`)\n\nA singleton document type for global site settings.\ There should only be one instance of this document.\n\n**Key Fields**:\n\n*   `title` (string, required): Site title (for internal Sanity use).\n*   `mainNavigation` (array of objects):\n    *   `linkText` (string): Text for the navigation link.\n    *   `url` (string or reference): Internal or external link.\n*   `footerText` (richText): Content for the site footer.\n*   `socialLinks` (array of objects):\n    *   `platform` (string, list): e.g., \"Facebook\", \"Instagram\", \"Twitter\".\n    *   `url` (url): Link to the social media profile.\n*   `defaultSeo` (seo): Default SEO settings for the site.\n*   `logo` (image): Site logo.\n\n## 🧩 Reusable Object Types (`sanity/schemas/objects/`)\n\nThese are not top-level documents but are embedded within other document types to promote consistency and reusability.\n\n### 1. Address (`address.ts`)\n\nStructured address information.\n\n**Fields**:\n\n*   `street` (string)\n*   `city` (string) - *Can be redundant if listing already references a City document, consider implications.*\n*   `stateOrProvince` (string)\n*   `postalCode` (string)\n*   `country` (string)\n\n### 2. GeoPoint (`geoPoint.ts` - if not using Sanity\'s built-in `geopoint`)\n\nLatitude and longitude.\n\n**Fields**:\n\n*   `lat` (number, required): Latitude.\n*   `lng` (number, required): Longitude.\n*   `alt` (number): Optional altitude.\n\n(Sanity has a built-in `geopoint` type which is generally preferred.)\n\n### 3. Image Gallery (`imageGallery.ts`)\n\nA collection of images with optional captions.\n\n**Fields**:\n\n*   `images` (array of images, with fields for `alt` text and `caption` (string)).\n\n### 4. Rich Text / Block Content (`richText.ts` or inline)\n\nDefines the configuration for Sanity\'s block content editor (Portable Text).\n\n**Configuration typically includes**:\n\n*   `styles`: Allowed paragraph styles (h1, h2, normal, quote).\n*   `lists`: Allowed list types (bullet, number).\n*   `marks`: Inline text decorators (bold, italic, underline, link).\n*   `annotations`: More complex inline elements (e.g., internal links to other documents).\n*   `types`: Allowed custom block types (e.g., image, code block, custom embeds).\n\n### 5. SEO (`seo.ts`)\n\nMetadata for search engine optimization.\n\n**Fields**:\n\n*   `metaTitle` (string): Custom SEO title (overrides default).\n*   `metaDescription` (text): Custom SEO description.\n*   `keywords` (array of strings): SEO keywords.\n*   `openGraphImage` (image): Image for social sharing.\n\n## 🛠️ Defining Schemas: Example Snippet\n\n```typescript\n// sanity/schemas/documents/listing.ts\nimport {defineType, defineField} from 'sanity'\n\nexport default defineType({\n  name: 'listing',\n  title: 'Listing',\n  type: 'document',\n  fields: [\n    defineField({\n      name: 'title',\n      title: 'Title',\n      type: 'string',\n      validation: Rule => Rule.required(),\n    }),\n    defineField({\n      name: 'slug',\n      title: 'Slug',\n      type: 'slug',\n      options: {\n        source: 'title',\n        maxLength: 96,\n      },\n      validation: Rule => Rule.required(),\n    }),\n    defineField({\n      name: 'mainImage',\n      title: 'Main Image',\n      type: 'image',\n      options: {\n        hotspot: true, // Enables image cropping hotspot\n      },\n      fields: [\n        {\n          name: 'alt',\n          type: 'string',\n          title: 'Alternative text',\n          description: 'Important for SEO and accessibility.',\n          validation: Rule => Rule.required(),\n        }\n      ]\n    }),\n    // ... other fields like description (richText), city (reference), etc.\n  ],\n  preview: {\n    select: {\n      title: 'title',\n      media: 'mainImage',\n      city: 'city.name', // Assuming city is a reference and has a name field\n    },\n    prepare(selection) {\n      const {title, media, city} = selection\n      return {\n        title: title,\n        subtitle: city ? `In ${city}` : 'Location not set',\n        media: media,\n      }\n    },\n  },\n})\n```\n\n## 🔗 References and Relationships\n\n*   **One-to-Many**: A `city` can have many `listings`. Implemented by `listing` having a reference field to `city`.\n*   **Many-to-Many**: `blogPosts` can have many `categories/tags`, and a `category/tag` can be applied to many `blogPosts`. Implemented using an array of references.\n\n## 🖼️ Image Handling\n\n*   Use the built-in `image` type.\n*   Always include an `alt` field for accessibility.\n*   Utilize `hotspot: true` for better image cropping control in the Studio.\n*   Consider defining specific image aspect ratios or sizes if needed for frontend consistency.\n\n## 🔄 Content Workflow & Validation\n\n*   **Validation Rules**: Use Sanity\'s validation API (e.g., `Rule.required()`, `Rule.min()`, `Rule.max()`, `Rule.regex()`) to ensure data integrity.\n*   **Initial Value Templates**: Define initial values for new documents to streamline content creation.\n*   **Preview Configuration**: Customize how documents are previewed in the Studio list views for better identification.\n*   **Status Fields**: Use `status` fields (e.g., draft, published) to manage content lifecycle.\n\n## 🌐 Internationalization (i18n)\n\nIf multi-language support is needed, Sanity offers several strategies:\n\n1.  **Field-level translation**: Add localized versions of fields (e.g., `title_en`, `title_es`). (Requires plugins like `sanity-plugin-intl-input` or custom object types).\n2.  **Document-level translation**: Create separate documents for each language, linked together.\n\nChoose the strategy that best fits the project\'s content and translation workflow.\n\n## 🚀 Best Practices\n\n*   **Start Simple**: Begin with core fields and add complexity as needed.\n*   **Be Consistent**: Use consistent naming conventions for types and fields.\n*   **Think About the Editor**: Design schemas that are intuitive for content editors.\n*   **Plan for Queries**: Consider how the frontend will query the data when designing relationships and fields.\n*   **Use Descriptions**: Add `description` properties to fields in your schemas to guide editors in the Studio.\n*   **Iterate**: Schemas can be evolved. Sanity handles schema migrations, but plan changes carefully.\n\n---\n\n🔗 **Related Documentation**:\n- [Sanity CMS README (`README.md`)](README.md)\n- [Sanity.io Schema Types Documentation](https://www.sanity.io/docs/schema-types)\n- [Sanity.io Validation Documentation](https://www.sanity.io/docs/validation)\n- [Sanity.io Preview Configuration](https://www.sanity.io/docs/previews-list-views)\n
